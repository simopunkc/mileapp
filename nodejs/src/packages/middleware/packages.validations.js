const {
  body,
  param,
  validationResult,
} = require('express-validator');

const validateParamId = [
  param('id').isString().notEmpty().withMessage('invalid id'),
];

const validateBodyCreate = [
  body('transaction_id').isUUID().notEmpty().withMessage('invalid transaction_id'),
  body('customer_name').isString().notEmpty().isLength({ max: 256 }).withMessage('invalid customer_name'),
  body('customer_code').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid customer_code'),
  body('transaction_amount').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid transaction_amount'),
  body('transaction_discount').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid transaction_discount'),
  body('transaction_additional_field').isString().withMessage('invalid transaction_additional_field'),
  body('transaction_payment_type').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid transaction_payment_type'),
  body('transaction_state').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid transaction_state'),
  body('transaction_code').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid transaction_code'),
  body('transaction_order').isInt({ min: 1 }).withMessage('invalid transaction_order'),
  body('location_id').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid location_id'),
  body('organization_id').isInt({ min: 1 }).withMessage('invalid organization_id'),
  body('created_at').isISO8601().withMessage('invalid created_at'),
  body('updated_at').isISO8601().withMessage('invalid updated_at'),
  body('transaction_payment_type_name').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid transaction_payment_type_name'),
  body('transaction_cash_amount').isInt({ min: 0 }).withMessage('invalid transaction_cash_amount'),
  body('transaction_cash_change').isInt({ min: 0 }).withMessage('invalid transaction_cash_change'),
  body('customer_attribute.Nama_Sales').isString().notEmpty().isLength({ max: 120 }).withMessage('invalid customer_attribute.Nama_Sales'),
  body('customer_attribute.TOP').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid customer_attribute.TOP'),
  body('customer_attribute.Jenis_Pelanggan').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid customer_attribute.Jenis_Pelanggan'),
  body('connote.connote_id').isUUID().notEmpty().withMessage('invalid connote.connote_id'),
  body('connote.connote_number').isInt({ min: 1 }).withMessage('invalid connote.connote_number'),
  body('connote.connote_service').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.connote_service'),
  body('connote.connote_service_price').isInt({ min: 0 }).withMessage('invalid connote.connote_service_price'),
  body('connote.connote_amount').isInt({ min: 0 }).withMessage('invalid connote.connote_amount'),
  body('connote.connote_code').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid connote.connote_code'),
  body('connote.connote_booking_code').isString().isLength({ max: 64 }).withMessage('invalid connote.connote_booking_code'),
  body('connote.connote_order').isInt({ min: 1 }).withMessage('invalid connote.connote_order'),
  body('connote.connote_state').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.connote_state'),
  body('connote.connote_state_id').isInt({ min: 1 }).withMessage('invalid connote.connote_state_id'),
  body('connote.zone_code_from').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.zone_code_from'),
  body('connote.zone_code_to').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.zone_code_to'),
  body('connote.surcharge_amount').optional({ checkFalsy: true }).isString().isNumeric().withMessage('invalid connote.surcharge_amount'),
  body('connote.transaction_id').isUUID().notEmpty().withMessage('invalid connote.transaction_id'),
  body('connote.actual_weight').isInt({ min: 0 }).withMessage('invalid connote.actual_weight'),
  body('connote.volume_weight').isInt({ min: 0 }).withMessage('invalid connote.volume_weight'),
  body('connote.chargeable_weight').isInt({ min: 0 }).withMessage('invalid connote.chargeable_weight'),
  body('connote.created_at').isISO8601().withMessage('invalid connote.created_at'),
  body('connote.updated_at').isISO8601().withMessage('invalid connote.updated_at'),
  body('connote.organization_id').isInt({ min: 1 }).withMessage('invalid connote.organization_id'),
  body('connote.location_id').isString().notEmpty().withMessage('invalid connote.location_id'),
  body('connote.connote_total_package').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.connote_total_package'),
  body('connote.connote_surcharge_amount').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.connote_surcharge_amount'),
  body('connote.connote_sla_day').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.connote_sla_day'),
  body('connote.location_name').isString().notEmpty().isLength({ max: 120 }).withMessage('invalid connote.location_name'),
  body('connote.location_type').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.location_type'),
  body('connote.source_tariff_db').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid connote.source_tariff_db'),
  body('connote.id_source_tariff').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.id_source_tariff'),
  body('connote.pod').optional({ checkFalsy: true }).isString().withMessage('invalid connote.pod'),
  body('connote.history').isArray().withMessage('invalid connote.history'),
  body('connote_id').isUUID().notEmpty().withMessage('invalid connote_id'),
  body('origin_data.customer_name').isString().notEmpty().isLength({ max: 120 }).withMessage('invalid origin_data.customer_name'),
  body('origin_data.customer_address').isString().notEmpty().isLength({ max: 256 }).withMessage('invalid origin_data.customer_address'),
  body('origin_data.customer_email').isEmail().notEmpty().isLength({ max: 64 }).withMessage('invalid origin_data.customer_email'),
  body('origin_data.customer_phone').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid origin_data.customer_phone'),
  body('origin_data.customer_address_detail').optional({ checkFalsy: true }).isString().isLength({ max: 256 }).withMessage('invalid origin_data.customer_address_detail'),
  body('origin_data.customer_zip_code').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid origin_data.customer_zip_code'),
  body('origin_data.zone_code').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid origin_data.zone_code'),
  body('origin_data.organization_id').isInt({ min: 1 }).withMessage('invalid origin_data.organization_id'),
  body('origin_data.location_id').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid origin_data.location_id'),
  body('destination_data.customer_name').isString().notEmpty().isLength({ max: 120 }).withMessage('invalid destination_data.customer_name'),
  body('destination_data.customer_address').isString().notEmpty().isLength({ max: 256 }).withMessage('invalid destination_data.customer_address'),
  body('destination_data.customer_email').optional({ checkFalsy: true }).isEmail().isLength({ max: 64 }).withMessage('invalid destination_data.customer_email'),
  body('destination_data.customer_phone').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid destination_data.customer_phone'),
  body('destination_data.customer_address_detail').isString().notEmpty().isLength({ max: 256 }).withMessage('invalid destination_data.customer_address_detail'),
  body('destination_data.customer_zip_code').isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid destination_data.customer_zip_code'),
  body('destination_data.zone_code').isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid destination_data.zone_code'),
  body('destination_data.organization_id').isInt({ min: 1 }).withMessage('invalid destination_data.organization_id'),
  body('destination_data.location_id').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid destination_data.location_id'),
  body('koli_data.*.koli_length').isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_length'),
  body('koli_data.*.awb_url').isString().notEmpty().isURL().isLength({ max: 160 }).withMessage('invalid koli_data.*.awb_url'),
  body('koli_data.*.created_at').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid koli_data.*.created_at'),
  body('koli_data.*.koli_chargeable_weight').isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_chargeable_weight'),
  body('koli_data.*.koli_width').isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_width'),
  body('koli_data.*.koli_surcharge').isArray().withMessage('invalid koli_data.*.koli_surcharge'),
  body('koli_data.*.koli_height').isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_height'),
  body('koli_data.*.updated_at').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid koli_data.*.updated_at'),
  body('koli_data.*.koli_description').isString().notEmpty().isLength({ max: 256 }).withMessage('invalid koli_data.*.koli_description'),
  body('koli_data.*.koli_formula_id').optional({ checkFalsy: true }).isString().isLength({ max: 32 }).withMessage('invalid koli_data.*.koli_formula_id'),
  body('koli_data.*.connote_id').isUUID().notEmpty().withMessage('invalid koli_data.*.connote_id'),
  body('koli_data.*.koli_volume').isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_volume'),
  body('koli_data.*.koli_weight').isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_weight'),
  body('koli_data.*.koli_id').isUUID().notEmpty().withMessage('invalid koli_data.*.koli_id'),
  body('koli_data.*.koli_custom_field.awb_sicepat').optional({ checkFalsy: true }).isString().withMessage('invalid koli_data.*.koli_custom_field.awb_sicepat'),
  body('koli_data.*.koli_custom_field.harga_barang').optional({ checkFalsy: true }).isString().withMessage('invalid koli_data.*.koli_custom_field.harga_barang'),
  body('koli_data.*.koli_code').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid koli_data.*.koli_code'),
  body('custom_field.catatan_tambahan').isString().notEmpty().isLength({ max: 256 }).withMessage('invalid custom_field.catatan_tambahan'),
  body('currentLocation.name').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid currentLocation.name'),
  body('currentLocation.code').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid currentLocation.code'),
  body('currentLocation.type').isString().notEmpty().isLength({ max: 32 }).withMessage('invalid currentLocation.type'),
];

const validateBodyUpdate = [
  param('id').isString().notEmpty().withMessage('invalid id'),
  body('transaction_id').optional().isUUID().notEmpty().withMessage('invalid transaction_id'),
  body('customer_name').optional().isString().notEmpty().isLength({ max: 256 }).withMessage('invalid customer_name'),
  body('customer_code').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid customer_code'),
  body('transaction_amount').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid transaction_amount'),
  body('transaction_discount').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid transaction_discount'),
  body('transaction_additional_field').optional().isString().withMessage('invalid transaction_additional_field'),
  body('transaction_payment_type').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid transaction_payment_type'),
  body('transaction_state').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid transaction_state'),
  body('transaction_code').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid transaction_code'),
  body('transaction_order').optional().isInt({ min: 1 }).withMessage('invalid transaction_order'),
  body('location_id').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid location_id'),
  body('organization_id').optional().isInt({ min: 1 }).withMessage('invalid organization_id'),
  body('created_at').optional().isISO8601().withMessage('invalid created_at'),
  body('updated_at').optional().isISO8601().withMessage('invalid updated_at'),
  body('transaction_payment_type_name').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid transaction_payment_type_name'),
  body('transaction_cash_amount').optional().isInt({ min: 0 }).withMessage('invalid transaction_cash_amount'),
  body('transaction_cash_change').optional().isInt({ min: 0 }).withMessage('invalid transaction_cash_change'),
  body('customer_attribute.Nama_Sales').optional().isString().notEmpty().isLength({ max: 120 }).withMessage('invalid customer_attribute.Nama_Sales'),
  body('customer_attribute.TOP').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid customer_attribute.TOP'),
  body('customer_attribute.Jenis_Pelanggan').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid customer_attribute.Jenis_Pelanggan'),
  body('connote.connote_id').optional().isUUID().notEmpty().withMessage('invalid connote.connote_id'),
  body('connote.connote_number').optional().isInt({ min: 1 }).withMessage('invalid connote.connote_number'),
  body('connote.connote_service').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.connote_service'),
  body('connote.connote_service_price').optional().isInt({ min: 0 }).withMessage('invalid connote.connote_service_price'),
  body('connote.connote_amount').optional().isInt({ min: 0 }).withMessage('invalid connote.connote_amount'),
  body('connote.connote_code').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid connote.connote_code'),
  body('connote.connote_booking_code').optional().isString().isLength({ max: 64 }).withMessage('invalid connote.connote_booking_code'),
  body('connote.connote_order').optional().isInt({ min: 1 }).withMessage('invalid connote.connote_order'),
  body('connote.connote_state').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.connote_state'),
  body('connote.connote_state_id').optional().isInt({ min: 1 }).withMessage('invalid connote.connote_state_id'),
  body('connote.zone_code_from').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.zone_code_from'),
  body('connote.zone_code_to').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.zone_code_to'),
  body('connote.surcharge_amount').optional({ checkFalsy: true }).isString().isNumeric().withMessage('invalid connote.surcharge_amount'),
  body('connote.transaction_id').optional().isUUID().notEmpty().withMessage('invalid connote.transaction_id'),
  body('connote.actual_weight').optional().isInt({ min: 0 }).withMessage('invalid connote.actual_weight'),
  body('connote.volume_weight').optional().isInt({ min: 0 }).withMessage('invalid connote.volume_weight'),
  body('connote.chargeable_weight').optional().isInt({ min: 0 }).withMessage('invalid connote.chargeable_weight'),
  body('connote.created_at').optional().isISO8601().withMessage('invalid connote.created_at'),
  body('connote.updated_at').optional().isISO8601().withMessage('invalid connote.updated_at'),
  body('connote.organization_id').optional().isInt({ min: 1 }).withMessage('invalid connote.organization_id'),
  body('connote.location_id').optional().isString().notEmpty().withMessage('invalid connote.location_id'),
  body('connote.connote_total_package').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.connote_total_package'),
  body('connote.connote_surcharge_amount').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.connote_surcharge_amount'),
  body('connote.connote_sla_day').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.connote_sla_day'),
  body('connote.location_name').optional().isString().notEmpty().isLength({ max: 120 }).withMessage('invalid connote.location_name'),
  body('connote.location_type').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid connote.location_type'),
  body('connote.source_tariff_db').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid connote.source_tariff_db'),
  body('connote.id_source_tariff').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid connote.id_source_tariff'),
  body('connote.pod').optional({ checkFalsy: true }).isString().withMessage('invalid connote.pod'),
  body('connote.history').optional().isArray().withMessage('invalid connote.history'),
  body('connote_id').optional().isUUID().notEmpty().withMessage('invalid connote_id'),
  body('origin_data.customer_name').optional().isString().notEmpty().isLength({ max: 120 }).withMessage('invalid origin_data.customer_name'),
  body('origin_data.customer_address').optional().isString().notEmpty().isLength({ max: 256 }).withMessage('invalid origin_data.customer_address'),
  body('origin_data.customer_email').optional().isEmail().notEmpty().isLength({ max: 64 }).withMessage('invalid origin_data.customer_email'),
  body('origin_data.customer_phone').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid origin_data.customer_phone'),
  body('origin_data.customer_address_detail').optional({ checkFalsy: true }).isString().isLength({ max: 256 }).withMessage('invalid origin_data.customer_address_detail'),
  body('origin_data.customer_zip_code').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid origin_data.customer_zip_code'),
  body('origin_data.zone_code').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid origin_data.zone_code'),
  body('origin_data.organization_id').optional().isInt({ min: 1 }).withMessage('invalid origin_data.organization_id'),
  body('origin_data.location_id').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid origin_data.location_id'),
  body('destination_data.customer_name').optional().isString().notEmpty().isLength({ max: 120 }).withMessage('invalid destination_data.customer_name'),
  body('destination_data.customer_address').optional().isString().notEmpty().isLength({ max: 256 }).withMessage('invalid destination_data.customer_address'),
  body('destination_data.customer_email').optional({ checkFalsy: true }).isEmail().isLength({ max: 64 }).withMessage('invalid destination_data.customer_email'),
  body('destination_data.customer_phone').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid destination_data.customer_phone'),
  body('destination_data.customer_address_detail').optional().isString().notEmpty().isLength({ max: 256 }).withMessage('invalid destination_data.customer_address_detail'),
  body('destination_data.customer_zip_code').optional().isString().notEmpty().isLength({ max: 32 }).isNumeric().withMessage('invalid destination_data.customer_zip_code'),
  body('destination_data.zone_code').optional().isString().notEmpty().isLength({ max: 32 }).isUppercase().withMessage('invalid destination_data.zone_code'),
  body('destination_data.organization_id').optional().isInt({ min: 1 }).withMessage('invalid destination_data.organization_id'),
  body('destination_data.location_id').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid destination_data.location_id'),
  body('koli_data.*.koli_length').optional().isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_length'),
  body('koli_data.*.awb_url').optional().isString().notEmpty().isURL().isLength({ max: 160 }).withMessage('invalid koli_data.*.awb_url'),
  body('koli_data.*.created_at').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid koli_data.*.created_at'),
  body('koli_data.*.koli_chargeable_weight').optional().isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_chargeable_weight'),
  body('koli_data.*.koli_width').optional().isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_width'),
  body('koli_data.*.koli_surcharge').optional().isArray().withMessage('invalid koli_data.*.koli_surcharge'),
  body('koli_data.*.koli_height').optional().isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_height'),
  body('koli_data.*.updated_at').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid koli_data.*.updated_at'),
  body('koli_data.*.koli_description').optional().isString().notEmpty().isLength({ max: 256 }).withMessage('invalid koli_data.*.koli_description'),
  body('koli_data.*.koli_formula_id').optional({ checkFalsy: true }).isString().isLength({ max: 32 }).withMessage('invalid koli_data.*.koli_formula_id'),
  body('koli_data.*.connote_id').optional().isUUID().notEmpty().withMessage('invalid koli_data.*.connote_id'),
  body('koli_data.*.koli_volume').optional().isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_volume'),
  body('koli_data.*.koli_weight').optional().isInt({ min: 0 }).withMessage('invalid koli_data.*.koli_weight'),
  body('koli_data.*.koli_id').optional().isUUID().notEmpty().withMessage('invalid koli_data.*.koli_id'),
  body('koli_data.*.koli_custom_field.awb_sicepat').optional({ checkFalsy: true }).isString().withMessage('invalid koli_data.*.koli_custom_field.awb_sicepat'),
  body('koli_data.*.koli_custom_field.harga_barang').optional({ checkFalsy: true }).isString().withMessage('invalid koli_data.*.koli_custom_field.harga_barang'),
  body('koli_data.*.koli_code').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid koli_data.*.koli_code'),
  body('custom_field.catatan_tambahan').optional().isString().notEmpty().isLength({ max: 256 }).withMessage('invalid custom_field.catatan_tambahan'),
  body('currentLocation.name').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid currentLocation.name'),
  body('currentLocation.code').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid currentLocation.code'),
  body('currentLocation.type').optional().isString().notEmpty().isLength({ max: 32 }).withMessage('invalid currentLocation.type'),
];

const validatePackageId = async (req) => {
  await Promise.all(validateParamId.map((validation) => validation.run(req)));
  return validationResult(req);
};

const validatePackageCreate = async (req) => {
  await Promise.all(validateBodyCreate.map((validation) => validation.run(req)));
  return validationResult(req);
};

const validatePackageUpdate = async (req) => {
  await Promise.all(validateBodyUpdate.map((validation) => validation.run(req)));
  return validationResult(req);
};

module.exports = {
  validatePackageId,
  validatePackageCreate,
  validatePackageUpdate,
};